<!DOCTYPE html>
<html>
 <head>
  <meta charset="UTF-8">
  <meta name="keywords" content="駒場東邦物理部,駒場東邦,駒東,KTPC,物理部,プログラミング,C++,講習">
  <meta name="description" content="駒場東邦物理部(KTPC)部員向けC++講習の資料です。引数について補足しています。">
  <meta name="author" content="駒場東邦物理部">
  <meta http-equiv="content-language" content="ja">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>文字列の表現 - C++講習 - 駒場東邦物理部</title>
  <link rel="icon" type="image/jpeg" href="../../../images/logo.jpg">
  <link rel="stylesheet" type="text/css" href="../../../style.css">
  <link rel="stylesheet" type="text/css" media="(max-width:800px)" href="../../../static.css">
  <script type="text/javascript" src="../../../header.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-133906591-2"></script>
  <script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   
   gtag('config', 'UA-133906591-2');
  </script>
 </head>
 <body>
  <header class="ch00">
   <img class="ch11" src="../../../images/br.jpg">
  </header>
  <div class="chb">
   <div class="ch01">
    <div class="ch10">
     <div class="ch21">
      <button type="button" class="ch31" onclick="ck()">
       <img class="ch42" src="../../../images/menu.png">
      </button>
     </div>
     <div id="hnmu" class="ch22" style="display: none; pointer-events:none;">
      <div class="ch32">
       <span class="ch40">
        <span class="ch50">駒場東邦物理部</span>
       </span>
       <a class="ch41" href="../../../index.html">
        <span class="ch50">トップページ</span>
       </a>
       <a class="ch41" href="../../le.html">
        <span class="ch50">講習トップ</span>
       </a>
      </div>
      <div class="ch32">
       <span class="ch40">
        <span class="ch50">C++講習</span>
       </span>
       <a class="ch41" href="../_cps.html">
        <span class="ch50">目次</span>
       </a>
       <a class="ch41" href="../i_dx/i_dx.html">
        <span class="ch50">索引</span>
       </a>
       <a class="ch41" href="../howd/howd.html">
        <span class="ch50">前回</span>
       </a>
       <a class="ch41" href="../l_vyadsg/l_vyadsg.html">
        <span class="ch50">次回</span>
       </a>
      </div>
     </div>
    </div>
   </div>
   <div class="cb00">
    <div class="cb10">
     <article class="cb20">
      <h1>C++講習/文字列の表現</h1>
     </article>
     <article class="cb21 fxtb">
      <h3 class="cb33">概要</h3>
      <span class="cb34">
       本章では、コンピュータが文字列を表現する方法を学びます。<br>
       なお、今後の講習ですぐに必要になる内容でないので、飛ばしても構いません。<br>
       ただし、あらすじは読んでおいてください。
      </span>
     </article>
     <article class="cb21">
      <div class="cb31">
       <h3 class="cb40">あらすじ</h3>
       <span class="cb41">
        文字列の表現方法はいくつかあります。<br>
        <span class="cb52">std::wstring</span>という方法のものをWindowsの関数に渡すときは、後ろに<span class="cb52">.c_str()</span>とつけましょう。
       </span>
      </div>
     </article>
     <article class="cb21 fxlr">
      <div class="cb36 debr">
       <h4 class="cb44">
        重要語
       </h4>
       <h4 class="cb45">
        メモリ
       </h4>
       <span class="cb41">
        データを保存しておく場所
       </span>
       <h4 class="cb45">
        アドレス
       </h4>
       <span class="cb41">
        メモリ内の位置を表す数値
       </span>
       <h4 class="cb45">
        NULL
       </h4>
       <span class="cb41">
        何もないことを表す値
       </span>
      </div>
      <div class="cb36 debr">
       <h4 class="cb44">
        必要語
       </h4>
       <h4 class="cb45">
        関数
       </h4>
       <span class="cb41">
        結果を返す、動作のまとまり
       </span>
       <h4 class="cb45">
        引数
       </h4>
       <span class="cb41">
        関数に渡す値
       </span>
      </div>
     </article>
     <article class="cb21 fxtb">
      <h3 class="cb33">引数とメモリ</h3>
      <span class="cb34">
       まず、前章で<span class="cb52">MessageBoxW</span>関数に渡した引数の正体を考えなくてはなりません。<br>
       以下に、<span class="cb52">MessageBoxW</span>関数の行のみを切り取っておきました。
      </span>
     </article>
     <article class="cb21 fxrl">
      <div class="cb37">
       <div class="cb46">
        <span class="cb54">Hello, worldの一部</span>
        <button type="button" class="cb53" onclick="copy('howd_0')">
         <span class="cb61">COPY</span>
        </button>
       </div>
       <code class="cb47">
<pre id="howd_0" class="cb55 bkgdbl">MessageBoxW<span class="wdsl">(</span>NULL<span class="wdsl">,</span> <span class="wdtt">L"Hello, world!"</span><span class="wdsl">,</span> <span class="wdtt">L"MessageBoxW"</span><span class="wdsl">,</span> MB_OK<span class="wdsl">);</span>
</pre>
       </code>
      </div>
     </article>
     <article class="cb21">
      <div class="cb31">
       <h3 class="cb40">引数にできる値</h3>
       <span class="cb41">
        さて、引数とは関数に渡す値でした。<br>
        しかし、渡したい値をすべて引数にできるとは限りません。<br>
        コンピュータの関数の引数には、数値しか指定できないのです。<br>
        <span class="cb52">MessageBoxW</span>関数で言えば、第1/第4引数は数値です。<br>
        つまり、第2/第3引数のような文字列は指定できないはずです。<br>
        なお、数値は指定できるので、1文字だけなら可能ですが、それでは文字列とは言えません。
       </span>
      </div>
     </article>
     <article class="cb21">
      <div class="cb31">
       <h3 class="cb40">メモリ/アドレス</h3>
       <span class="cb41">
        コンピュータには、非常に多くの数値を保存できるメモリがついています。<br>
        データを置いた場所を表すには、アドレスという数値を使います。
       </span>
      </div>
     </article>
     <article class="cb21">
      <div class="cb31">
       <h3 class="cb40">アドレス渡し</h3>
       <span class="cb41">
        そこで、数値1つで表現できないデータは、メモリに保存しておくことができます。<br>
        引数には、データの先頭のアドレスを指定します。<br>
        これによって、複雑なデータも数値1つで表すことができています。<br>
        このように、データそのものではなく、データを指すアドレスを引数にすることを、アドレス渡しといいます。
       </span>
      </div>
     </article>
     <article class="cb21">
      <div class="cb31">
       <h3 class="cb40">符号化</h3>
       <span class="cb41">
        さて、メモリに保存するにも、データを数値にしなければなりません。<br>
        このことを、符号化といいます。<br>
        例えば、文字の符号化方式が文字コードです。
       </span>
      </div>
     </article>
     <article class="cb21 fxtb">
      <h3 class="cb33">文字列の終端</h3>
      <span class="cb34">
       文字列には、もう一つ大きな問題があります。<br>
       メモリには、数値がずっと並んでいるので、どこまでが文字列かわからないのです。<br>
       現在では、主に2つの解決策が使われています。<br>
       昔は、文字列の長さを固定してしまうという方法がとられたこともありました。
      </span>
     </article>
     <article class="cb21">
      <div class="cb31">
       <h3 class="cb40">終端文字/NULL</h3>
       <span class="cb41">
        この方法では、文字列の終端の次に、終端文字という文字という特殊な文字を入れます。<br>
        これは、C++の前身であるC言語で採用されています。<br>
        C++の文脈では、C方式の文字列と呼ばれることもあります。<br>
        通常、終端文字には、NULLという値があてられます。<br>
        NULLは、ヌルと読み、何もないことを表します。<br>
        <span class="cb52">MessageBoxW</span>の第1引数にも<span class="cb52">NULL</span>を指定していました。<br>
        指定すべき値について解説していないので、この引数で渡すデータはない、という意味でした。
       </span>
      </div>
     </article>
     <article class="cb21">
      <div class="cb31">
       <h3 class="cb40">長さを保存</h3>
       <span class="cb41">
        もう1つの方法は、文字列の前に、長さを書いておく方法です。<br>
        こちらは、C++で主に使用されています。<br>
        この方法では、引数の値が表しているのは文字列のアドレスではありません。<br>
        つまり、終端文字を使う方法とは互換性がないのです。
       </span>
      </div>
     </article>
     <article class="cb21">
      <div class="cb31">
       <h3 class="cb40">文字列の変換</h3>
       <span class="cb41">
        さて、2つの方法には互換性がないのですが、Windowsは主にC言語で書かれています。<br>
        ですから、Windowsの関数は、前者の終端文字の方式を使います。<br>
        しかし、私たちは今、C++でプログラムを書いています。<br>
        次の章で出てくる、<span class="cb52">std::wstring</span>という方式の文字列では、後者の方式を用いることが決められています。<br>
        このような場合、値の後ろに<span class="cb52">c_str</span>関数をつけます。<br>
        詳しい書き方は次章を見てください。
       </span>
      </div>
     </article>
    </div>
   </div>
   <footer class="cf00">
    <div class="cf10">
     <button class="cf21" onclick="tp()">
      <img class="cf30" src="../../../images/top.png">
     </button>
     <span class="cf20">
      (C) 2020 駒場東邦物理部[KTPC]
     </span>
    </div>
   </footer>
  </div>
 </body>
</html>
