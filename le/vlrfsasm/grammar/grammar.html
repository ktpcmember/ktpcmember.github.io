<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="keywords" content="駒場東邦物理部,駒場東邦,駒東,KTPC,物理部,プログラミング,講習,Vlrfsasm"><meta name="description" content="駒場東邦物理部(KTPC)部員向けVlrfsasm講習の資料です。"><meta name="author" content="駒場東邦物理部"><meta http-equiv="content-language" content="ja"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>文法 - Vlrfsasm講習 - 駒場東邦物理部</title><link rel="icon" type="image/jpeg" href="../../../images/logo.jpg"><link rel="stylesheet" type="text/css" href="../../../tool/vlrfsasmKtpc/style/default.css"><link rel="stylesheet" type="text/css" media="(max-width:800px)" href="../../../tool/vlrfsasmKtpc/style/narrow.css"><script src="../../../tool/vlrfsasmKtpc/js/search.js"></script><script src="https://www.googletagmanager.com/gtag/js?id=UA-133906591-2"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-133906591-2')</script></head><body class="hBody"><header class="hHeader"><image class="hBanner" src="../../../images/br.jpg"></header><div class="hBeneathHeader"><div class="hMenuSide"><div class="hMenuBack"><div class="hMenuButtonBack"><button class="hMenuButton" onclick="menu()"><image class="hMenuButtonImage" src="../../../images/menu.png"></button></div><div class="hMenuLink" style="display: none; pointer-events: none;" id="menuLink"><div class="hMenuLinkGroup"><div class="hMenuLinkTitle"><span class="hMenuLinkText">駒場東邦物理部</span></div><a class="hMenuLinkElement" href="../../../index.html"><span class="hMenuLinkText">トップページ</span></a><a class="hMenuLinkElement" href="../../../le/le.html"><span class="hMenuLinkText">講習トップ</span></a></div><div class="hMenuLinkGroup"><div class="hMenuLinkTitle"><span class="hMenuLinkText">Vlrfsasm講習</span></div><a class="hMenuLinkElement" href="../setup/setup.html"><span class="hMenuLinkText">準備</span></a><a class="hMenuLinkElement" href="../vlrfsasm.html"><span class="hMenuLinkText">講習トップ</span></a><a class="hMenuLinkElement" href="../function/function.html"><span class="hMenuLinkText">関数</span></a></div></div><div class="hMenuWord" style="display: none; pointer-events: none;" id="menuWord"></div></div></div><div class="hContentSide"><div class="hContentBack"><article class="cArticle"><h2 class="cArticleTitle">概要</h2><div class="cArticleCaption"><p class="cP">本章では、Vlrfsasmの文法について解説します。</p></div><section class="cSection"><h2 class="cSectionTitle">前章の内容について</h2><p class="cP">前章の最後で「Hello world!」を出力しましたが、実のところあれはかなり高度な内容を含むので、解説は後の章で行います。</p></section></article><article class="cArticle"><h2 class="cArticleTitle">値</h2><div class="cArticleCaption"><p class="cP">Vlrfsasmでは、データのことを「値」と呼びます。</p></div><section class="cSection"><h2 class="cSectionTitle">値の実体</h2><p class="cP">値は、順序と方向をもつ1次元のビット列で表現されます。値には、型などの情報を分けて付加することはできません。全てこのビット列に埋めこむ必要があるので、利用する構造体には、判別できる情報を予め加えましょう。</p></section><section class="cSection"><h2 class="cSectionTitle">値の幅</h2><p class="cP">値に含まれるビットの数を、「幅」と言います。「長さ」や「大きさ」も、Vlrfsasmにおいては同義語です。値は、0以上524288以下の個数のビットを含むことができますが、この範囲外の幅をもつ値は処理できず、エラーとなります。なお、この上限は、65536バイトや64KBとも言い換えられます。</p></section></article><article class="cArticle"><h2 class="cArticleTitle">構文</h2><div class="cArticleCaption"><p class="cP">ほとんどのプログラミング言語には文字があり、その並べ方が規定されています。Vlrfsasmにおいても、いくらかの決まりがありますが、プログラミング言語では標準的なものが多く、簡単に理解できると思います。</p></div><section class="cSection"><h2 class="cSectionTitle">文字</h2><p class="cP">Vlrfsasmでは、Unicodeの全ての文字を許容していますが、特別な意味をもつものはASCIIの範囲のみです。</p><p class="cP"><div class="cCodeFrame"><div class="cCodeMenu"><span class="cCodeMenuTitle">Vlrfsasmで特別な意味を持つ字</span><button class="cCodeMenuElement cCodeMenuButton cCodeMenuRight" onclick="copyScript(this)"><image class="cCodeMenuIcon" src="../../../images/icon/copy.svg"><span class="cCodeMenuText">COPY</span></button><span class="cCodeMenuElement cCodeMenuRight cCodeMenuInvisible"><image class="cCodeMenuIcon" src="../../../images/icon/done.svg"><span class="cCodeMenuText">COPIED!</span></span></div><code class="cCodeMulti"><pre class="cCodePre"><span class="qLine"><span class="qPathName">あとで追加します</span></span></pre></code></div></p><p class="cP">これ以外の文字、例えば<span class="cCodeSingle"><span class="qLine"><span class="qPathName">Z</span></span></span>、<span class="cCodeSingle"><span class="qLine"><span class="qPathName">_</span></span></span>、<span class="cCodeSingle"><span class="qLine"><span class="qPathName">σ</span></span></span>、<span class="cCodeSingle"><span class="qLine"><span class="qPathName">じ</span></span></span>、<span class="cCodeSingle"><span class="qLine"><span class="qPathName">字</span></span></span>、<span class="cCodeSingle"><span class="qLine"><span class="qPathName">자</span></span></span>などは自由に使って構いません。しかし、特に日本語の設定での入力中は、全角スペースを避けましょう。Vlrfsasmはこれと半角スペースとを区別しますが、見た目にはわからないので、バグを生みます。</p></section><section class="cSection"><h2 class="cSectionTitle">符</h2><p class="cP">どんな言語でも、1字では意味を全て区別できません。いくつかの字をまとめ、単語として解釈することになります。英語ならスペースで区切れば単語を切り出せます。Vlrfsasmにおいても、区切り文字と括弧、文字列リテラル標識とコメント標識で単語を分けます。前節の文字一覧を参照してください。また、英語であれば記号<span class="cCodeSingle"><span class="qLine"><span class="qPathName">.</span></span></span>や<span class="cCodeSingle"><span class="qLine"><span class="qPathName">?</span></span></span>は単語として認められませんが、Vlrfsasmでは認めます。そこで、Vlrfsasmでは、これらの意味のまとまりのことを「符」と呼ぶことにしています。</p></section><section class="cSection"><h2 class="cSectionTitle">コメント</h2><p class="cP">動くプログラムと読みやすいプログラムは違います。他の人が読む場合、あるいは未来の自分が読む場合を考えて、簡単なメモを残しておくと、生産性がとても上がります。もちろん、プログラム中に突然、日本語や英語が書くわけにはいきません。Vlrfsasmはこのための「コメント」という機能を持っています。コメント開始標識<span class="cCodeSingle"><span class="qLine"><span class="qPathName">[</span></span></span>からコメント終了標識<span class="cCodeSingle"><span class="qLine"><span class="qPathName">]</span></span></span>までは、符として解釈されません。</p></section></article><article class="cArticle"><h2 class="cArticleTitle">リテラル</h2><div class="cArticleCaption"><p class="cP">Vlrfsasmはデータを変換して出力するプログラムです。変換対象のデータを入力する方法は2つあります。一方がソースファイル内に記述するもので、リテラルと呼ばれます。もう一方の生ファイルについては、後の章で説明します。</p></div><section class="cSection"><h2 class="cSectionTitle">数値リテラル</h2><p class="cP">リテラルはさらに2種類に分けられます。片方は数値をそのまま記述する「数値リテラル」です。Vlrfsasmのコード中で、<span class="xUnderlineRed">数字</span>または後述の<span class="xUnderlineBlue">基数接頭辞</span>から始まる単語は、数値リテラルとして認識されます。</p><p class="cP"><div class="cCodeFrame"><div class="cCodeMenu"><span class="cCodeMenuTitle">数値リテラルの始めの文字</span><button class="cCodeMenuElement cCodeMenuButton cCodeMenuRight" onclick="copyScript(this)"><image class="cCodeMenuIcon" src="../../../images/icon/copy.svg"><span class="cCodeMenuText">COPY</span></button><span class="cCodeMenuElement cCodeMenuRight cCodeMenuInvisible"><image class="cCodeMenuIcon" src="../../../images/icon/done.svg"><span class="cCodeMenuText">COPIED!</span></span></div><code class="cCodeMulti"><pre class="cCodePre"><span class="qLine"><span class="qVlrNumber">0123456789$%</span></span></pre></code></div></p><p class="cP">数値リテラルによる値の幅は、リテラルの桁数などに関わらず、64ビットになります。これを超える長さの値を表したいときは、後述の結合関数や、生ファイルを使うことになります。</p><p class="cP">数値リテラルの途中には、<span class="cCodeSingle"><span class="qLine"><span class="qVlrName">-</span></span></span>や<span class="cCodeSingle"><span class="qLine"><span class="qVlrName">_</span></span></span>のような記号を含めることができます。長いリテラルの桁区切りに活用しましょう。</p></section><section class="cSection"><h2 class="cSectionTitle">基数接頭辞</h2><p class="cP">数値リテラルでは、以下のように3種類の基数が使えます。</p><table class="cTAC"><caption>接頭辞と基数</caption><tr><td>基数</td><td>記数法</td><td>接頭辞</td><td>例1</td><td>例2</td></tr><tr><td>2</td><td>二進法</td><td><span class="cCodeSingle"><span class="qLine"><span class="qVlrNumber">%</span></span></span></td><td><span class="cCodeSingle"><span class="qLine"><span class="qVlrNumber">%1011</span></span></span></td><td><span class="cCodeSingle"><span class="qLine"><span class="qVlrNumber">%01001110</span></span></span></td></tr><tr><td>10</td><td>十進法</td><td>なし</td><td><span class="cCodeSingle"><span class="qLine"><span class="qVlrNumber">11</span></span></span></td><td><span class="cCodeSingle"><span class="qLine"><span class="qVlrNumber">78</span></span></span></td></tr><tr><td>16</td><td>十六進法</td><td><span class="cCodeSingle"><span class="qLine"><span class="qVlrNumber">$</span></span></span></td><td><span class="cCodeSingle"><span class="qLine"><span class="qVlrNumber">$B</span></span></span></td><td><span class="cCodeSingle"><span class="qLine"><span class="qVlrNumber">$4E</span></span></span></td></tr></table><p class="cP">どの表記でも、値は等しいので、記述時にわかりやすいもので書きましょう。</p><p class="cP">なお、負の数を表す接頭辞はありません。正の数を書いてから符号を反転させます。</p></section><section class="cSection"><h2 class="cSectionTitle">文字列リテラル</h2><p class="cP">ご存知の通り、文字列はビット列です。Vlrfsasmでは、文字コードをUnicodeに統一しており、符号化方式はUtf-16BEを標準として他の形式との変換機能を提供します。リテラルのもう一方はこの文字列で、やはりUTF-16BEのビット列として扱われます。幅は1文字につき16ビットで、サロゲートペアがあれば32ビットです。</p><p class="cP">文字列リテラルは、文字列を二重引用符<span class="cCodeSingle"><span class="qLine"><span class="qVlrString">"</span></span></span>で囲うことで表します。例えば、<span class="cCodeSingle"><span class="qLine"><span class="qComEmpty">"文字列A"</span></span></span>は、幅が64ビットですから、<span class="cCodeSingle"><span class="qLine"><span class="qVlrNumber">$6587-5B57-5217-0041</span></span></span>と書くのと同じことです。</p></section><section class="cSection"><h2 class="cSectionTitle">エスケープシーケンス</h2><p class="cP">さて、文字列は二重引用符で囲むと書きましたが、二重引用符を文字列に入れたい場合はどうすればよいのでしょうか。このとき、特殊な表記を用います。記号<span class="cCodeSingle"><span class="qLine"><span class="qPathSplit">\</span></span></span>に続く文字に、通常と異なる意味を持たせるのです。この記号には、バックスラッシュや円記号など、環境によって様々な表示揺れがあります。Vlrfsasmの作者は、これを文字コードの数値から「5C」と呼んでいます。</p><table class="cTAC"><caption>エスケープシーケンス</caption><tr><td>表記</td><td>16ビットの解釈値</td></tr><tr><td><span class="cCodeSingle"><span class="qLine"><span class="qComEmpty">"\r"</span></span></span></td><td>$000D</td></tr><tr><td><span class="cCodeSingle"><span class="qLine"><span class="qComEmpty">"\n"</span></span></span></td><td>$000A</td></tr><tr><td><span class="cCodeSingle"><span class="qLine"><span class="qComEmpty">"\""</span></span></span></td><td>$0022</td></tr><tr><td><span class="cCodeSingle"><span class="qLine"><span class="qComEmpty">"\\"</span></span></span></td><td>$005C</td></tr></table><p class="cP">なお、文字列リテラルが複数行に渡る場合、改行コードは<span class="cCodeSingle"><span class="qLine"><span class="qComEmpty">"\r\n"</span></span></span>になります。</p></section></article></div></div><div class="hFooterSide"><footer class="hFooter"><button class="hFooterButton" onclick="scrollToTop()"><image class="hFooterButtonImage" src="../../../images/top.png"></button><span class="hFooterText">(C) 2020 駒場東邦物理部</span></footer></div></div></body></html>