<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="keywords" content="駒場東邦物理部,駒場東邦,駒東,KTPC,物理部,プログラミング,講習,Vlrfsasm"><meta name="description" content="駒場東邦物理部(KTPC)部員向けVlrfsasm講習の資料です。"><meta name="author" content="駒場東邦物理部"><meta http-equiv="content-language" content="ja"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>ライブラリ - Vlrfsasm講習 - 駒場東邦物理部</title><link rel="icon" type="image/jpeg" href="../../../images/logo.jpg"><link rel="stylesheet" type="text/css" href="../../../tool/vlrfsasmKtpc/style/default.css"><link rel="stylesheet" type="text/css" media="(max-width:800px)" href="../../../tool/vlrfsasmKtpc/style/narrow.css"><script src="../../../tool/vlrfsasmKtpc/js/search.js"></script><script src="https://www.googletagmanager.com/gtag/js?id=UA-133906591-2"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-133906591-2')</script></head><body class="hBody"><header class="hHeader"><image class="hBanner" src="../../../images/br.jpg"></header><div class="hBeneathHeader"><div class="hMenuSide"><div class="hMenuBack"><div class="hMenuButtonBack"><button class="hMenuButton" onclick="menu()"><image class="hMenuButtonImage" src="../../../images/menu.png"></button></div><div class="hMenuLink" style="display: none; pointer-events: none;" id="menuLink"><div class="hMenuLinkGroup"><div class="hMenuLinkTitle"><span class="hMenuLinkText">駒場東邦物理部</span></div><a class="hMenuLinkElement" href="../../../index.html"><span class="hMenuLinkText">トップページ</span></a><a class="hMenuLinkElement" href="../../../le/le.html"><span class="hMenuLinkText">講習トップ</span></a></div><div class="hMenuLinkGroup"><div class="hMenuLinkTitle"><span class="hMenuLinkText">Vlrfsasm講習</span></div><a class="hMenuLinkElement" href="../builtin/builtin.html"><span class="hMenuLinkText">組み込み関数</span></a><a class="hMenuLinkElement" href="../vlrfsasm.html"><span class="hMenuLinkText">講習トップ</span></a><a class="hMenuLinkElement" href="../loop/loop.html"><span class="hMenuLinkText">ループ</span></a></div></div><div class="hMenuWord" style="display: none; pointer-events: none;" id="menuWord"></div></div></div><div class="hContentSide"><div class="hContentBack"><article class="cPageTitleBack"><h1 class="cPageTitle">Vlrfsasm講習/ライブラリ</h1></article><article class="cArticle"><h2 class="cArticleTitle">概要</h2><div class="cArticleCaption"><p class="cP">本章では、関数<span class="cCodeSingle"><span class="qLine"><span class="qVlrName">c.convertS8Sb</span></span></span>などについて解説します。前章までに登場していたものの、まだ詳しい説明はありませんでした。これらは、「ライブラリ」によって提供されている関数です。</p></div></article><article class="cArticle"><h2 class="cArticleTitle">ライブラリ</h2><div class="cArticleCaption"><p class="cP">ライブラリとは、Vlrfsasmの関数集のことです。実体はVlrfsasmのソースファイルなので、拡張子は<span class="cCodeSingle"><span class="qLine"><span class="qPathName">.vlra</span></span></span>です。</p></div><section class="cSection"><h2 class="cSectionTitle">読み込み</h2><p class="cP">ライブラリを使うには、<span class="cCodeSingle"><span class="qLine"><span class="qPathName">vlrfsasm.exe</span></span></span>に、ファイルのパスを伝える必要があります。今までと同じように作業フォルダを用意し、メモ帳で<span class="cCodeSingle"><span class="qLine"><span class="qPathName">assemble.bat</span></span></span>を開いてみてください。最後に<span class="cCodeSingle"><span class="qLine"><span class="qPathName">def</span><span class="qPathSplit">/</span><span class="qPathName">common.vlra</span></span></span>というパスが書いてあるはずです。実は、これはライブラリのファイルです。このファイルが<span class="cCodeSingle"><span class="qLine"><span class="qPathName">assembler</span><span class="qPathSplit">/</span><span class="qPathName">def</span></span></span>フォルダ内にあることを確認してみましょう。</p><p class="cP">このように、<span class="cCodeSingle"><span class="qLine"><span class="qVlrName">vlrfsasm.exe</span></span></span>を実行する際、引数にライブラリのパスを追加しておけば、まとめて読み込んでくれます。順序は気にしなくてよいです。</p></section><section class="cSection"><h2 class="cSectionTitle">目的</h2><p class="cP">ライブラリを使う理由は、2つあります。</p><p class="cP">まず、記述の手間を減らせることが挙げられます。複数のプログラム間で、必要な関数が被ることはよくあります。これをライブラリにまとめておけば、それを読み込むだけで使えるようになります。もちろん毎回コピーするという選択肢もありますが、やはり面倒な上に、コード量が増大して読みにくくなってしまいます。</p><p class="cP">もう1つは、仕様を均一にしやすいことです。目的が同じでも、毎回書いていれば、細部が異なってくることがあります。ライブラリを共用すれば、細かな差異に煩わされにくくなります。</p></section><section class="cSection"><h2 class="cSectionTitle">接頭辞</h2><p class="cP">ライブラリの使用に当たって注意したいのが、名前の衝突です。特に、他人が書いたライブラリの関数名を全て認識するのは面倒だと思います。</p><p class="cP">そこで、関数名に数文字の接頭辞を付けることを推奨します。一見手間が増えるように見えますが、作者は利点が勝ると考えています。</p><p class="cP">まず、接頭辞があることで、衝突をほぼ回避できます。接頭辞が重複しなければ名前の衝突も起こらないわけです。仮に接頭辞が衝突したとしても、<span class="cCodeSingle"><span class="qLine"><span class="qVlrSymbol">(</span><span class="qVlrName">a.functionName</span><span class="qVlrSymbol">)</span></span></span>を<span class="cCodeSingle"><span class="qLine"><span class="qVlrSymbol">(</span><span class="qVlrName">b.functionName</span><span class="qVlrSymbol">)</span></span></span>に変更するには、<span class="cCodeSingle"><span class="qLine"><span class="qVlrSymbol">(</span><span class="qVlrName">a.</span></span></span>から<span class="cCodeSingle"><span class="qLine"><span class="qVlrSymbol">(</span><span class="qVlrName">b.</span></span></span>の一括変換で済みます。</p><p class="cP">また、自分が書いた関数同士の識別にも役立ちます。例えば、構造体を扱う関数群に同一の接頭辞を付けることで、処理内容を明確にできます。Vlrfsasmには型がありませんから、このような形で補う効果は大きいです。</p></section></article></div></div><div class="hFooterSide"><footer class="hFooter"><button class="hFooterButton" onclick="scrollToTop()"><image class="hFooterButtonImage" src="../../../images/top.png"></button><span class="hFooterText">(C) 2020 駒場東邦物理部</span></footer></div></div></body></html>