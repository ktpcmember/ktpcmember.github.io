<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="keywords" content="駒場東邦物理部,駒場東邦,駒東,KTPC,物理部,プログラミング,講習,Vlrfsasm"><meta name="description" content="駒場東邦物理部(KTPC)部員向けVlrfsasm講習の資料です。"><meta name="author" content="駒場東邦物理部"><meta http-equiv="content-language" content="ja"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>数式 - Vlrfsasm講習 - 駒場東邦物理部</title><link rel="icon" type="image/jpeg" href="../../../images/logo.jpg"><link rel="stylesheet" type="text/css" href="../../../tool/vlrfsasmKtpc/style/default.css"><link rel="stylesheet" type="text/css" media="(max-width:800px)" href="../../../tool/vlrfsasmKtpc/style/narrow.css"><script src="../../../tool/vlrfsasmKtpc/js/search.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-NYLVKLP28G"></script async><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NYLVKLP28G')</script></head><body class="hBody"><header class="hHeader"><image class="hBanner" src="../../../images/br.jpg"></header><div class="hBeneathHeader"><div class="hMenuSide"><div class="hMenuBack"><div class="hMenuButtonBack"><button class="hMenuButton" onclick="menu()"><image class="hMenuButtonImage" src="../../../images/menu.png"></button></div><div class="hMenuLink" style="display: none; pointer-events: none;" id="menuLink"><div class="hMenuLinkGroup"><div class="hMenuLinkTitle"><span class="hMenuLinkText">駒場東邦物理部</span></div><a class="hMenuLinkElement" href="../../../../../../index.html"><span class="hMenuLinkText">トップページ</span></a><a class="hMenuLinkElement" href="../../../../../../le/le.html"><span class="hMenuLinkText">講習一覧</span></a></div><div class="hMenuLinkGroup"><div class="hMenuLinkTitle"><span class="hMenuLinkText">Vlrfsasm講習</span></div><a class="hMenuLinkElement" href="../table/table.html"><span class="hMenuLinkText">表</span></a><a class="hMenuLinkElement" href="../vlrfsasm.html"><span class="hMenuLinkText">講習トップ</span></a><a class="hMenuLinkElement" href="../code/code.html"><span class="hMenuLinkText">コード</span></a></div></div><div class="hMenuWord" style="display: none; pointer-events: none;" id="menuWord"></div></div></div><div class="hContentSide"><div class="hContentBack"><article class="cPageTitleBack"><h1 class="cPageTitle">Vlrfsasm講習/数式</h1></article><article class="cArticle"><h2 class="cArticleTitle">構文</h2><div class="cArticleCaption"><p class="cP">数式の記述には、拡張記法の<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">[;]</span></span></span>による関数表記を使います。<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">t</span></span></span>以外の関数は、多重に適用できます。</p></div><section class="cSection"><h2 class="cSectionTitle">変換</h2><p class="cP">数式の説明に入る前に、全体を関数<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">m</span></span></span>の引数にすることを覚えておいてください。</p><p class="cP">本変換器の内部では、数式の構造を表すため、バイナリデータを用いています。Unicodeの文字として正当な値である保証は全くありません。ぞの上、出力時にUTF-8への変換を行うため、意味のわからないデータになってしまいます。これがブラウザに悪影響をもたらす可能性もあるので、注意してくだざい。</p><p class="cP">この関数を通すと、内部表現はsvgに変換されます。なお、単純な文字列は、内部表現として扱うことができます。つまり、内部表現と文字列を並べたものもまた内部表現です。</p><p class="cP"><div class="cCodeFrame"><div class="cCodeMenu"><span class="cCodeMenuTitle">例</span><button class="cCodeMenuElement cCodeMenuButton cCodeMenuRight" onclick="copyScript(this)"><image class="cCodeMenuIcon" src="../../../images/icon/copy.svg"><span class="cCodeMenuText">COPY</span></button><span class="cCodeMenuElement cCodeMenuRight cCodeMenuInvisible"><image class="cCodeMenuIcon" src="../../../images/icon/done.svg"><span class="cCodeMenuText">COPIED!</span></span></div><code class="cCodeMulti"><pre class="cCodePre"><ol class="cCodeOl cCodeOlNumber"><li class="qLine"><span class="qPathName">[m;A=1]</span></li></ol></pre></code></div></p><p class="cP"><svg class="cSvg" width="33px" height="13px" viewBox="0 0 33 13" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="12.45" font-size="16.00px">A=1</text></svg></p></section><section class="cSection"><h2 class="cSectionTitle">フォント</h2><p class="cP">数式中のアルファベットは、基本的に斜体で表示されます。</p><p class="cP">しかしながら、斜体は変数を意味するため、関数を表記したいときには不向きです。<svg class="cSvg" width="28px" height="12px" viewBox="0 0 28 12" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="11.49" font-size="16.00px">sinx</text></svg>と書いてあっても読めないことはないでしょうが、立体で表示したほうがよいです。</p><p class="cP">そこで、関数<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">t</span></span></span>を定義してあります。これは、数式内のみで使える関数で、引数は1つです。引数を立体にして表示する効果があります。</p><div class="cTableBack"><table><tr><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">[m;sinx=1]</span></span></span></td><td><svg class="cSvg" width="49px" height="12px" viewBox="0 0 49 12" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="11.65" font-size="16.00px">sinx=1</text></svg></td></tr><tr><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">m;[t;sin]x=1</span></span></span></td><td><svg class="cSvg" width="49px" height="12px" viewBox="0 0 49 12" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="11.65" font-size="16.00px" font-family="'Computer Modern', serif">sin</text><text x="20.39" y="11.65" font-size="16.00px">x=1</text></svg></td></tr></table></div><p class="cP">関数<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">t</span></span></span>の範囲外である<svg class="cSvg" width="8px" height="9px" viewBox="0 0 8 9" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="8.07" font-size="16.00px">x</text></svg>は、斜体のまま表示されています。</p><p class="cP">なお、この関数の実装はかなり簡易なものなので、位置のズレなどが起こるかもしれません。</p></section><section class="cSection"><h2 class="cSectionTitle">拡張記法</h2><p class="cP">拡張記法にはさまざまな関数がありましたが、数式内で使用できる関数は限られています。本章で解説する数式専用関数と、<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">a</span></span></span>のみです。その他の関数はHTMLの要素を用いており、svg内にHTMLを埋め込むのは難しいため、対応していません。</p></section></article><article class="cArticle"><h2 class="cArticleTitle">上下付き線</h2><section class="cSection"><h2 class="cSectionTitle">上付き線</h2><p class="cP">上付き線は、<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">mo</span></span></span>関数を用いて表示します。数式外における関数<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">o</span></span></span>と全く同じ使い方です。引数を1つ取り、上に引数と同じ幅の線を描画します。</p><p class="cP">複素の共役、統計の平均、論理の否定などに使われます。以下のように、複数回適用することもできます。</p><div class="cTableBack"><table><caption>複素数の性質</caption><tr><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">[m;[mo;[mo;w]]=w]</span></span></span></td></tr></table></div><p class="cP"><svg class="cSvg" width="34px" height="17px" viewBox="0 0 34 17" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><path d="M 0.00 3.00 h 10.61" stroke="black"/><path d="M 0.00 7.00 h 10.61" stroke="black"/><text x="0.00" y="16.07" font-size="16.00px">w</text><text x="10.61" y="16.07" font-size="16.00px">=w</text></svg></p></section><section class="cSection"><h2 class="cSectionTitle">下付き線</h2><p class="cP">下付き線は、<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">mu</span></span></span>を用いて表示します。<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">mo</span></span></span>とほぼ同じなので、説明や例は省略します。</p><p class="cP">なお、この関数は関数<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">u</span></span></span>に対応するものがないと気になるという理由で作られました。作者は数学や物理の式において、一度も下付き線を使ったことがありません。</p></section></article><article class="cArticle"><h2 class="cArticleTitle">根号</h2><section class="cSection"><h2 class="cSectionTitle">平方根</h2><p class="cP">平方根は、<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">s</span></span></span>を用いて表示します。引数は1つで、根号の中身を指定します。</p><div class="cTableBack"><table><caption>例</caption><tr><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">[m;[s;2][a;.][s;3]=[s;6]]</span></span></span></td><td><svg class="cSvg" width="67px" height="17px" viewBox="0 0 67 17" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><path d="M 0.00 12.07 h 2.00 l 2.00 3.57 l 6.00 -12.65 h 8.00" stroke="black" fill="none"/><text x="10.00" y="15.65" font-size="16.00px">2</text><text x="18.00" y="15.65" font-size="16.00px">⋅</text><path d="M 18.00 12.30 h 2.00 l 2.00 3.69 l 6.00 -13.00 h 8.00" stroke="black" fill="none"/><text x="28.00" y="15.65" font-size="16.00px">3</text><text x="36.00" y="15.65" font-size="16.00px">=</text><path d="M 48.44 12.30 h 2.00 l 2.00 3.69 l 6.00 -13.00 h 8.00" stroke="black" fill="none"/><text x="58.44" y="15.65" font-size="16.00px">6</text></svg></td></tr></table></div></section><section class="cSection"><h2 class="cSectionTitle">n乗根</h2><p class="cP">平方根だけでなく、立方根やそれ以上も表示することができます。関数は<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">r</span></span></span>です。引数は2つあり、第一引数が基数、第二引数が指数です。</p><div class="cTableBack"><table><tr><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">[m;[r;8;3]=2]</span></span></span></td><td><svg class="cSvg" width="39px" height="17px" viewBox="0 0 39 17" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><path d="M 0.00 12.30 h 2.00 l 2.00 3.69 l 6.00 -13.00 h 8.00" stroke="black" fill="none"/><text x="10.00" y="15.65" font-size="16.00px">8</text><text x="0.00" y="10.05" font-size="12.00px">3</text><text x="18.00" y="15.65" font-size="16.00px">=2</text></svg></td></tr></table></div></section></article><article class="cArticle"><h2 class="cArticleTitle">分数</h2><section class="cSection"><h2 class="cSectionTitle">通常サイズ</h2><p class="cP">分数は、関数<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">f</span></span></span>を用いて表します。引数は2つで、第一引数が分子、第二引数が分母になります。日本語で「A分のB」などという順とは逆なので、気をつけましょう。なお、横線の長さは、分母と分子の幅のうち大きいものを基準に、さらに微妙に長くしているので、分数を重ねても区別することができます。</p><div class="cTableBack"><table><tr><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">[m;[f;2;5]=0.4]</span></span></span></td><td><svg class="cSvg" width="49px" height="27px" viewBox="0 0 49 27" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><path d="M 2.00 13.65 h 12.00" stroke="black"/><text x="4.00" y="11.65" font-size="16.00px">2</text><text x="4.00" y="26.31" font-size="16.00px">5</text><text x="16.00" y="19.65" font-size="16.00px">=0.4</text></svg></td></tr></table></div></section><section class="cSection"><h2 class="cSectionTitle">小書き</h2><p class="cP">分数は、2段重ねになるのに加え、横線とその上下の空白も含むので、高さを取りがちです。文章中で使うような場合には、あまり好ましくありません。</p><p class="cP">そこで、分子や分母のサイズを縮めて表示する関数<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">fs</span></span></span>も用意してあります。引数は<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">f</span></span></span>と同様です。</p><div class="cTableBack"><table><tr><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">[m;[fs;2;5]=0.4]</span></span></span></td><td><svg class="cSvg" width="49px" height="27px" viewBox="0 0 49 27" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><path d="M 2.00 13.65 h 12.00" stroke="black"/><text x="4.00" y="11.65" font-size="16.00px">2</text><text x="4.00" y="26.31" font-size="16.00px">5</text><text x="16.00" y="19.65" font-size="16.00px">=0.4</text></svg></td></tr></table></div></section></article><article class="cArticle"><h2 class="cArticleTitle">周辺付き文字</h2><div class="cArticleCaption"><p class="cP">「周辺付き文字」というのは、作者の造語です。<svg class="cSvg" width="9px" height="19px" viewBox="0 0 9 19" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="18.06" font-size="16.00px">x</text><text x="0.70" y="8.99" font-size="12.00px">2</text></svg>の<svg class="cSvg" width="8px" height="12px" viewBox="0 0 8 12" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="11.65" font-size="16.00px">2</text></svg>や、<svg class="cSvg" width="31px" height="18px" viewBox="0 0 31 18" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="8.07" font-size="16.00px">a</text><text x="8.17" y="16.06" font-size="12.00px">n+1</text></svg>の<svg class="cSvg" width="30px" height="13px" viewBox="0 0 30 13" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="11.65" font-size="16.00px">n+1</text></svg>のようなものを指しています。</p></div><section class="cSection"><h2 class="cSectionTitle">位置</h2><p class="cP">周辺付き文字には、多種多様な用法があります。しかし、よほど中央の文字が大きいのでなければ、位置をある程度分類することができます。</p><p class="cP">以下に、それぞれの位置に対する番号を示します。一般的にどう呼ばれているのかはわかりません。また、用途はあくまで一例です。</p><div class="cTableBack"><table><caption>周辺付き文字の位置番号</caption><tr><td>番号</td><td>位置</td><td>用途</td></tr><tr><td>0</td><td><svg class="cSvg" width="28px" height="17px" viewBox="0 0 28 17" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="16.45" font-size="16.00px">O</text><text x="12.25" y="8.99" font-size="12.00px">2−</text></svg></td><td>イオンの価数、積分の終点</td></tr><tr><td>1</td><td><svg class="cSvg" width="14px" height="17px" viewBox="0 0 14 17" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="16.06" font-size="16.00px">x</text><text x="7.40" y="8.99" font-size="12.00px">3</text></svg></td><td>冪乗の指数</td></tr><tr><td>2</td><td><svg class="cSvg" width="12px" height="20px" viewBox="0 0 12 20" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="19.32" font-size="16.00px">Π</text><text x="0.00" y="6.30" font-size="12.00px">∞</text></svg></td><td>総和や総乗の終点</td></tr><tr><td>3</td><td><svg class="cSvg" width="20px" height="21px" viewBox="0 0 20 21" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="8.00" y="20.44" font-size="16.00px">A</text><text x="2.00" y="8.99" font-size="12.00px">3</text></svg></td><td></td></tr><tr><td>4</td><td><svg class="cSvg" width="37px" height="17px" viewBox="0 0 37 17" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="16.00" y="16.62" font-size="16.00px">Na</text><text x="4.00" y="8.99" font-size="12.00px">23</text></svg></td><td>原子量</td></tr><tr><td>5</td><td><svg class="cSvg" width="32px" height="18px" viewBox="0 0 32 18" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="16.00" y="12.28" font-size="16.00px">Cl</text><text x="4.00" y="16.92" font-size="12.00px">17</text></svg></td><td>陽子の数、組み合わせ</td></tr><tr><td>6</td><td><svg class="cSvg" width="20px" height="21px" viewBox="0 0 20 21" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="8.00" y="11.92" font-size="16.00px">B</text><text x="2.00" y="19.92" font-size="12.00px">6</text></svg></td><td></td></tr><tr><td>7</td><td><svg class="cSvg" width="27px" height="24px" viewBox="0 0 27 24" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="15.30" y="11.92" font-size="16.00px">Σ</text><text x="-0.00" y="22.25" font-size="12.00px">1≤k≤10</text></svg></td><td>総和や総乗の範囲、limit</td></tr><tr><td>8</td><td><svg class="cSvg" width="34px" height="21px" viewBox="0 0 34 21" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="12.10" font-size="16.00px" font-family="'Computer Modern', serif">log</text><text x="19.60" y="20.09" font-size="12.00px">8</text><text x="25.60" y="12.10" font-size="16.00px">x</text></svg></td><td>数列の添字、対数の基数</td></tr><tr><td>9</td><td><svg class="cSvg" width="17px" height="18px" viewBox="0 0 17 18" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="0.00" y="12.28" font-size="16.00px">C</text><text x="11.43" y="17.13" font-size="12.00px">k</text></svg></td><td>組み合わせ</td></tr></table></div></section><section class="cSection"><h2 class="cSectionTitle">単独</h2><p class="cP">さて、周辺付き文字を1つ付けたいとき、関数名は位置番号の1字です。Vlrfsasmの句の規則を覚えている人には、違和感があるかもしれません。実は、内部で接頭辞<span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qVlrName">hx.</span></span></span>を付けて実行しているので、他の関数や数値リテラルとの衝突は起こらないのです。</p><p class="cP">第一引数に中央の文字、第二引数に周辺の文字を指定します。なお、「文字」などといっていますが、1文字でなくても、また以下のように分数などでも構いません。</p><div class="cTableBack"><table><tr><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">[m;[2;a;[f;1;2]]=[s;a]]</span></span></span></td><td><svg class="cSvg" width="41px" height="30px" viewBox="0 0 41 30" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="1.91" y="29.05" font-size="16.00px">a</text><path d="M 1.50 10.49 h 13.00" stroke="black"/><text x="3.00" y="8.99" font-size="12.00px">1</text><text x="3.00" y="19.98" font-size="12.00px">2</text><text x="10.08" y="29.05" font-size="16.00px">=</text><path d="M 22.53 26.79 h 2.00 l 2.00 2.42 l 6.00 -9.25 h 8.17" stroke="black" fill="none"/><text x="32.53" y="29.05" font-size="16.00px">a</text></svg></td></tr></table></div></section><section class="cSection"><h2 class="cSectionTitle">複数</h2><p class="cP">1つの文字に対し、複数の文字を周辺に付けることもできます。ただし、内部表現の制約から、4つまでです。</p><div class="cTableBack"><table><tr><td>周辺付き文字の数</td><td>関数名</td><td>引数の個数</td></tr><tr><td>2</td><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">Z</span></span></span></td><td>4</td></tr><tr><td>3</td><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">D</span></span></span></td><td>5</td></tr><tr><td>4</td><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathName">V</span></span></span></td><td>6</td></tr></table></div><p class="cP">ちなみに、作者は定義時にドイツ語の勉強をしていました。英語やラテン語では衝突を起こしたという事情もあります。</p><p class="cP">さて、これらの関数の第一引数は、中央の文字です。そして、第二引数には位置番号の列を指定します。第三引数以降では、第二引数の順に周辺付き文字を与えます。</p><div class="cTableBack"><table><tr><td><span class="cCodeSingleFrame"><span class="cCodeSingle"><span class="qPathComment">&lt;svg class="cSvg" width="26px" height="18px" viewBox="0 0 26 18" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"&gt;</span><span class="qPathComment">&lt;text x="8.98" y="12.28" font-size="16.00px"&gt;</span><span class="qPathName">C</span><span class="qPathComment">&lt;/text&gt;</span><span class="qPathComment">&lt;text x="2.25" y="14.10" font-size="12.00px"&gt;</span><span class="qPathName">n</span><span class="qPathComment">&lt;/text&gt;</span><span class="qPathComment">&lt;text x="20.42" y="17.13" font-size="12.00px"&gt;</span><span class="qPathName">k</span><span class="qPathComment">&lt;/text&gt;</span><span class="qPathComment">&lt;/svg&gt;</span></span></span></td><td><svg class="cSvg" width="26px" height="18px" viewBox="0 0 26 18" xmlns="http://www.w3.org/2000/svg" stroke="none" fill="black"><text x="8.98" y="12.28" font-size="16.00px">C</text><text x="2.25" y="14.10" font-size="12.00px">n</text><text x="20.42" y="17.13" font-size="12.00px">k</text></svg></td></tr></table></div></section></article></div></div><div class="hFooterSide"><footer class="hFooter"><button class="hFooterButton" onclick="scrollToTop()"><image class="hFooterButtonImage" src="../../../images/top.png"></button><span class="hFooterText">(C) 2020 駒場東邦物理部</span></footer></div></div></body></html>